<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Encoder - GM Tool</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #eee;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: #20c20e;
            text-shadow: 0 0 20px rgba(32, 194, 14, 0.5);
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .card h2 {
            color: #ffb000;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        
        .card p {
            color: #aaa;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        textarea {
            width: 100%;
            height: 300px;
            background: #0a0a15;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            color: #20c20e;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        textarea:focus {
            outline: none;
            border-color: #20c20e;
            box-shadow: 0 0 10px rgba(32, 194, 14, 0.3);
        }
        
        textarea::placeholder {
            color: #444;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        button.primary {
            background: linear-gradient(135deg, #20c20e, #15a000);
            color: #000;
        }
        
        button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(32, 194, 14, 0.4);
        }
        
        button.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        button.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .format-help {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .format-help h3 {
            color: #00d4aa;
            margin-bottom: 10px;
            font-size: 1em;
        }
        
        .format-help code {
            display: block;
            background: #0a0a15;
            padding: 15px;
            border-radius: 6px;
            color: #20c20e;
            font-size: 12px;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-top: 10px;
        }
        
        .status {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }
        
        .status.success {
            display: block;
            background: rgba(32, 194, 14, 0.2);
            border: 1px solid #20c20e;
            color: #20c20e;
        }
        
        .status.error {
            display: block;
            background: rgba(255, 51, 51, 0.2);
            border: 1px solid #ff3333;
            color: #ff3333;
        }
        
        .warning {
            background: rgba(255, 176, 0, 0.1);
            border: 1px solid rgba(255, 176, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            color: #ffb000;
        }
        
        .warning strong {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚óà DATABASE ENCODER ‚óà</h1>
        <p class="subtitle">GM Tool - Encrypt your campaign database for the terminal</p>
        
        <div class="warning">
            <strong>‚ö† FOR GM USE ONLY</strong>
            This tool encrypts your database.txt into a .dat file that only the terminal can read.
            Do NOT share this encoder with your players!
        </div>
        
        <div class="card">
            <h2>Step 1: Paste Your Database</h2>
            <p>Paste the contents of your database.txt file below:</p>
            <textarea id="inputText" placeholder="LOCATIONS:Seattle|The sprawl of Seattle dominates...

CORPORATIONS:Aztechnology|One of the Big Ten megacorporations...

CONFIDENTIAL:Project X|[CLASSIFIED] Top secret data..."></textarea>
            
            <div class="format-help">
                <h3>Database Format</h3>
                <p style="color: #888; font-size: 13px;">Each entry follows this format, with blank lines between entries:</p>
                <code>CATEGORY:Title|Content goes here

CATEGORY:Another Title|More content here

CONFIDENTIAL:Secret Entry|Hidden from non-admin users</code>
            </div>
        </div>
        
        <div class="card">
            <h2>Step 2: Generate Encrypted File</h2>
            <p>Click the button to encrypt and download your database:</p>
            <div class="buttons">
                <button class="primary" onclick="encryptAndDownload()">üîê Encrypt & Download .dat File</button>
                <button class="secondary" onclick="loadSampleData()">Load Sample Data</button>
            </div>
            <div class="status" id="status"></div>
        </div>
        
        <div class="card">
            <h2>Step 3: Use With Terminal</h2>
            <p>1. Place the downloaded <strong>database.dat</strong> in the same folder as <strong>terminal.html</strong></p>
            <p>2. Open the terminal in a browser</p>
            <p>3. Type <strong>LOAD</strong> and select the .dat file</p>
            <p>4. The terminal will automatically decrypt and load the entries</p>
            <p style="color: #20c20e; margin-top: 15px;">‚úì Players cannot read the .dat file - it's encrypted gibberish!</p>
        </div>
    </div>
    
    <script>
        const ENCRYPTION_KEY = 'Shelby';
        
        function xorCrypt(text) {
            let result = '';
            for (let i = 0; i < text.length; i++) {
                result += String.fromCharCode(text.charCodeAt(i) ^ ENCRYPTION_KEY.charCodeAt(i % ENCRYPTION_KEY.length));
            }
            return result;
        }
        
        function encryptAndDownload() {
            const input = document.getElementById('inputText').value.trim();
            const status = document.getElementById('status');
            
            if (!input) {
                status.className = 'status error';
                status.textContent = 'Error: Please paste your database content first!';
                return;
            }
            
            if (!input.includes(':') || !input.includes('|')) {
                status.className = 'status error';
                status.textContent = 'Error: Invalid format. Make sure entries use CATEGORY:Title|Content format.';
                return;
            }
            
            try {
                // XOR encrypt then Base64 encode
                const encrypted = xorCrypt(input);
                const encoded = btoa(encrypted);
                
                // Create and download file
                const blob = new Blob([encoded], { type: 'application/octet-stream' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'database.dat';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // Count entries
                const entries = input.split('\n\n').filter(e => e.trim() && e.includes(':') && e.includes('|'));
                
                status.className = 'status success';
                status.textContent = `‚úì Success! Encrypted ${entries.length} entries. File downloaded as database.dat`;
            } catch (error) {
                status.className = 'status error';
                status.textContent = 'Error: Failed to encrypt. ' + error.message;
            }
        }
        
        function loadSampleData() {
            document.getElementById('inputText').value = `LOCATIONS:Seattle|The sprawl of Seattle dominates the Pacific Northwest. Controlled by corporate interests and gang territories, it's a city of contrasts where gleaming arcologies tower over decrepit slums.

LOCATIONS:The Barrens|The forgotten districts of Seattle where the desperate and the dangerous make their homes. No corporate or government presence means the strong survive and the weak don't.

CORPORATIONS:Aztechnology|One of the Big Ten megacorporations, Aztechnology maintains its headquarters in Tenochtitlan. Publicly known for consumer goods and magical research, they're rumored to practice blood magic.

CORPORATIONS:Renraku|Japanese megacorp specializing in computers, robotics, and heavy industry. The Renraku Arcology in Seattle was once a symbol of corporate power until the AI incident.

PEOPLE:Shadowrunners|Deniable assets. The expendables. Shadowrunners operate in the cracks between the corps, doing the dirty work no one else will touch.

MAGIC:The Awakening|December 24, 2011. The world changed forever. Magic returned, and with it came metahumans, spirits, and dragons.

TECH:Cyberware|Direct neural-interface technology that replaces organic body parts with synthetic upgrades. Enhanced reflexes, built-in weapons, data processing - all available for the right price.

CONFIDENTIAL:Project Icarus|[CLASSIFIED] Neural extraction experiments conducted at Black Site 7. Subject mortality rate: 94%. Promising results in memory transfer technology.

CONFIDENTIAL:Operation Blackout|[CLASSIFIED] Planned EMP strike on Seattle grid. Contingency protocol for corporate uprising. Authorization: Director Level 9 only.`;
            
            document.getElementById('status').className = 'status';
        }
    </script>
</body>
</html>
